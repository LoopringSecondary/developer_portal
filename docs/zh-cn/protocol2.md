# 路印协议 2.0

## 新特性

## 代币经济模型

路印协议2.0主要包含两个方面的重要升级，一方面是提供更多更强大的撮合功能，另一方面是引入一个全新的代币经济模型（小则称之为费用模型）。我们相信在经济模型中的诸多设计都是首创的。


### 行业通用设计
每一个发币的项目都拥有一个小的经济体。这种代币经济体大如比特币，以太坊；小如路印。比特币经济体的核心在于价值存储，其中矿工，开发者，和持有者是这个经济体主要的几个角色。而比特币在这个经济体中的价值也很简单，那就是价值的载体和支付的手段。以太坊的经济体更加丰满，其中的角色还包含了dApp的开发者和区块链项目方；以太坊的价值则主要体现在智能合约部署和调用的付费上。

2017到2018年行业孕育了大大小小项目数百个，每个项目都发了至少一种代币。有的项目还把“权益”分开成另一种代币，做了双币机制。一般来讲双币的权益币更像是一种证券，另一种币则多被定位为应用类代币（utility token)。但如果你研究下，就不难发现多数应用类代币都被设计成项目经济体里面唯一的费用代币。这种设计其实也无可厚非，毕竟每个项目方都需要为自己的代币赋予一个价值，否则就不会有人购买。

这种代币设计有个很显著的问题：为了使用项目平台或服务，需要首先购买项目代币。这会对用户造成了很大的困扰，总不能使用一百个dApp就需要手里有一百种不同的代币吧？！直觉上这种行业级现象就是有问题的。而用现实世界作参考，我们也知道只有少数国家的货币价格稳定，许多国家的法币都挺不过一百年，或者贬值的不像样子。另外购买项目方代币本身也是个无中生有多于的步骤，严重影响用户体验。何况目前dApp非支付环节的体验本身就不够好。

很多项目方声称，未来会支持代币持有者对系统参数的变更和整体升级有投票甚至一定的管理权限，为代币赋予“管理代币”的属性。但我们相信仅仅赋予代币去中心化的“管理”属性不足以要求必须使用该代币做系统内的支付。

### 路印1.0的经济模型
在路印代币经济体里，除了开发团队和普通持有者，我们还有三个重要的角色：交易者，钱包，和中继（偶尔也被称为撮合者，环路矿工）。LRC也是这三个角色之间的费用代币：交易者消费钱包的订单管理服务和中继的撮合服务，并通过LRC来为这两项服务付费。



![路印1.0费用](/_media/feemodel/1.png)
以上图为例，交易者支付100LRC作为费用，其中20%支付给了钱包，另外80%支付给了路印的中继（中继再支付0.001ETH给以太坊矿工）。

这种设计与其它项目本质上没有区别。但具体的设计上，LRC依然有可圈可点的地方。比如路印清算的时候，还会把订单的“成本节约（margin）”在交易者，钱包和中继间做个分享，保证撮合时候矿工的决策与用户和钱包的利益是完全一致的。我们有一篇英文博客，详细说明了路印1.0中的费用模型，大家有空可以了解一下。

关于“成本节约” — 如一个订单卖1000个LRC换1个ETH，结果只卖了995个LRC就换了1个ETH，那么少卖掉的5个LRC就是成本节约；如一个订单卖1个ETH换1000个LRC，结果卖出1个ETH后换了1010个LRC，那么多出来的10个LRC就是成本节约。

### 路印2.0全新的经济模型
路印新经济模型的一个核心设计理念是减少交易摩擦，允许使用任意ERC20代币支付撮合费用，同时保障LRC的价值。

#### 费用燃烧
我们在路印2.0的撮合中引入费用燃烧的概念— 所有收费方都需要将所得费用的一部分换成LRC燃烧掉。我们以下图为例，简单说明这种新的费用模型。



![路印2.0撮合费用](/_media/feemodel/2.png)
我们假设用户这次交易使用BNB支付费用；同时假定协议对BNB设置的燃烧率是20%，且该笔交易的手续费是100BNB。在清算过程中，交易者支付100BNB；而钱包和中继的总收入为100*(1–20%)=80BNB，20BNB用来买入LRC燃烧掉。你可能会问，燃烧到底如何发生的？别着急，这点我们后续会讲到。

#### 做市商优惠
在2.0中，我们还引入了另一个重要的参数waiveFeePercentage ，该参数对于某个特定订单的值如果大于零，比如是“50%”，那么如果该订单本来燃烧前要付给撮合中继80BNB，现在只需要付40BNB。注意：旷工可以免除部分或者全部自己的撮合费用，但是无法免除钱包应得的费用。



![免除订单费用](/_media/feemodel/3.png)
该waiveFeePercentage参数还可以小于零，比如“-50%”。这样订单不但完全不用支付任何费用给中继，还可以从中继其他订单的手续费中分得50%。在下面的例子中，中继会把用户乙支付的40个LRC中的一半作为返佣付给用户甲。当然，用户甲得到的返佣也要相应地燃烧一部分。


![做市商订单返佣](/_media/feemodel/4.png)

通过路印协议2.0的waiveFeePercentage参数，中继可以选择免除做市商订单的部分或全部费用，甚至还可以将其他订单的撮合收入的一部分返佣给做市商，鼓励其在自己的平台上提供流动性。

#### P2P交易经济模型
上文中提到的费用，实际上是“撮合费用”的简称。但在2.0中，我们把P2P订单从普通订单中分离出来，提供了特殊的费用模型。首先我们定义一下什么是P2P订单：

P2P订单：如果订单的tokenSFeePercentage或tokenBFeePercentage大于零，该订单即为P2P订单。P2P订单中其他的撮合费用参数将被协议忽略。
P2P订单本质上是下单方不希望被第三方撮合，而是希望直接被对手单吃掉，因此也就不会付撮合费用。

P2P订单主要的收费主体是钱包。这里的钱包是个更宽泛的概念，包括任何可以帮你生成订单的工具。钱包可以从一个P2P订单中获取买入代币（tokenB）和卖出代币（tokenS）的一个比例作为费用。这个比例是钱包在用户认可的前提下设置的，并非由协议本身提供。我们先假设某钱包设置的这两个费用都是0%，在下面的例子里两个P2P订单互换100DAI和400GTO：


![两个零手续费P2P订单组成的环路](/_media/feemodel/5.png)

但如果两个P2P订单对应的钱包分别设置了不同的收费比例，实际的费用和交易比例的计算就会复杂一些：

![两个设置了手续费的P2P订单组成的环路](/_media/feemodel/6.png)

实体经济中有很多价值交互并不需要第三方撮合服务，因此其费用模型也不能用撮合费用模型来替代。如果没有2.0中新的P2P代币经济模型，这种场景就无法通过路印协议1.0或现有的任何一种去中心化交易协议来实现。

##### P2P订单费用燃烧
P2P订单付给钱包的手续费也需要做部分燃烧。假定对DAI和GTO的燃烧率分别是10%和20%，上面的交易计算就需要做如下调整：

![P2P费用燃烧](/_media/feemodel/7.png)


#### 燃烧过程
所有参与燃烧的代币都需要转换成LRC后将LRC燃烧掉（其他代币实际是被卖出，而不是燃烧掉；燃烧掉的只是LRC）。我们会在2.0的升级版本中，允许任何人触发燃烧合约，把非LRC代币通过去中心化的方式兑换成LRC（比如通过去中心化的荷兰式拍卖），并将这些LRC燃烧掉。这一触发将是没有权限限制的。在这个升级之前，非LRC代币兑换成LRC需要由路印基金会手动进行，并很可能是通过中心化交易所来完成兑换。

#### 燃烧率设置
我们可以对不同的ERC20代币设置不同的燃烧率。我们目前计划2.0燃烧率设置4个不同的阶梯:


![燃烧率阶梯设置](/_media/feemodel/8.jpeg)



可以看出，燃烧率对LRC是最优的；另外WETH也享受比较低的燃烧率。

#### 燃烧LRC来降低平台币的燃烧率
在2.0的升级版本中，我们将允许通过燃烧LRC来降低某个特定代币在一定时期内的燃烧率。如果你想降低某个代币的燃烧率，比如GTO，到与WETH一样的第三阶梯燃烧率24个月，需要燃烧LRC总量的0.5%（目前等值于210万人民币）；如果想降低燃烧率到与LRC所在的第一阶梯24个月，可能需要燃烧LRC总量的1.5%（目前等值于650万人民币）。随着燃烧的LRC越来越多，LRC的发行总量也会逐渐减少，后续用来降低燃烧率所需燃烧的LRC数量也会相应减小。

降低燃烧率机制对于发了自己平台币的去中心化交易所是有好处的。首先，燃烧LRC获取低燃烧率的成本要远远小于研发一个新的去中心化交易协议的成本，同时可以避免专利纠纷；其次，这个机制实际上赋予了平台币另一个应用（utility），能进一步提升平台币的价值。DEX燃烧平台币换取更低的燃烧率后，使用路印协议和自己的代币做撮合费用对用户来讲与使用LRC就没有任何区别，这一定会能提升平台的竞争力。

#### 燃烧返还
在协议2.0中，我们还允许用户将LRC锁定一段时间用来获取本应被燃烧的费用的返还（rebate）。比如地址锁定100万个LRC，并获取了50%的燃烧返还率。如果该锁定期的一个订单本应付100个AnyToken费用，其中40个应被燃烧掉；那么在燃烧返还后，该订单只需要付80个AnyToken，其中20AnyToken被燃烧掉，返还用户20个AnyToken。注意燃烧返还不会消耗钱包或者中继的实际费用收入；燃烧返还计算完全依赖于费用支付方的燃烧返还率，而不是费用接收方的燃烧返还率。

如果用户锁定足够多的LRC，就会在一定期间获的100%的燃烧返还率，这相当于他在该期间所有订单的费用都免燃烧。这对于高频交易者非常有好处，可以大大降低交易成本。

#### 去中心化治理
很多项目声称未来会把项目的治理权交还给社区。但多数项目其实没有什么需要社区治理的。路印协议未来的去中心化治理主要是对上诉各种燃烧率参数进行投票管理，也包括某些ERC20代币应该被放到哪个燃烧率阶梯当中。

去中心化治理的挑战还包括如何限定持币量太大的账户的权利（投票权重），鼓励尽可能多的代币持有者参与到投票当中。目前我们也在这方面做探索，希望在2019年上半年能够提供一个升级版，允许社区提案参数变更以及对提案进行投票。

## 智能合约